<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ðŸŽ“ Certificate Generator | Multi Program</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f8fafc;
      text-align: center;
      padding: 40px 20px;
    }
    h2 {
      font-size: 28px;
      color: #0f172a;
      margin-bottom: 20px;
    }
    input, select, button {
      padding: 10px;
      margin: 8px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 6px;
      width: 320px;
    }
    button {
      background-color: #1e293b;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #334155;
    }
    #previewContainer {
      margin-top: 30px;
      display: none;
    }
    iframe {
      width: 90%;
      height: 400px;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <h2>ðŸŽ“ Multi-Track Certificate Generator</h2>
  <input id="name" placeholder="Recipient Full Name" /><br>
  <input id="trackingLink" placeholder="Verification Link (e.g. Google Drive URL)" /><br>
  <select id="program">
    <option value="Full Stack Developer Program">Full Stack Developer Program</option>
    <option value="Offensive Security Engineer">Offensive Security Engineer</option>
    <option value="SOC Analyst Program">SOC Analyst Program</option>
    <option value="AI/ML Engineering Course">AI/ML Engineering Course</option>
    <option value="Cloud Security Bootcamp">Cloud Security Bootcamp</option>
    <option value="Bug Bounty & Vulnerability Research">Bug Bounty & Vulnerability Research</option>
    <option value="CTF & Reverse Engineering Mastery">CTF & Reverse Engineering Mastery</option>
    <option value="Blockchain Developer Track">Blockchain Developer Track</option>
    <option value="DevSecOps Pipeline Course">DevSecOps Pipeline Course</option>
    <option value="Linux Kernel Internals & Exploitation">Linux Kernel Internals & Exploitation</option>
    <option value="Mobile App Full Stack Program">Mobile App Full Stack Program</option>
    <option value="System Design & Architecture">System Design & Architecture</option>
  </select><br>
  <select id="theme">
    <option value="modern">Modern</option>
    <option value="dark">Dark</option>
    <option value="gold">Gold</option>
  </select><br>
  <button onclick="previewCertificate()">Preview Certificate</button>
  <button onclick="generateCertificate()">Download Certificate</button>

  <canvas id="qrCanvas" hidden></canvas>
  <canvas id="logoCanvas" width="400" height="80" hidden></canvas>

  <div id="previewContainer">
    <h3>ðŸ“„ Preview</h3>
    <iframe id="previewFrame"></iframe>
  </div>

  <script>
    function drawLogo() {
      const canvas = document.getElementById('logoCanvas');
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.beginPath();
      ctx.arc(30, 40, 25, 0, Math.PI * 2);
      ctx.fillStyle = '#0ea5e9';
      ctx.fill();
      ctx.font = 'bold 24px Segoe UI';
      ctx.fillStyle = '#ffffff';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('N', 30, 40);
      ctx.font = 'bold 20px Segoe UI';
      ctx.fillStyle = '#0f172a';
      ctx.textAlign = 'start';
      ctx.fillText('Nemo Cyber World', 70, 44);
    }

    function generatePDFBlob(theme, name, program, link, trackingId) {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF({ orientation: "landscape", unit: "mm", format: "a4" });

      if (theme === 'dark') {
        doc.setFillColor(15, 23, 42);
        doc.rect(0, 0, 297, 210, "F");
        doc.setTextColor(255, 255, 255);
      } else if (theme === 'gold') {
        doc.setDrawColor(180, 140, 40);
        doc.setLineWidth(2);
        doc.rect(10, 10, 277, 190);
        doc.setTextColor(30, 30, 30);
      } else {
        doc.setDrawColor(200);
        for (let i = -200; i < 500; i += 10) {
          doc.line(i, 0, i + 200, 210);
        }
        doc.setDrawColor(60);
        doc.setLineWidth(1.1);
        doc.rect(10, 10, 277, 190);
      }

      const qr = new QRious({ element: document.getElementById("qrCanvas"), value: link, size: 100 });
      const qrDataUrl = qr.toDataURL();
      const logoDataUrl = document.getElementById("logoCanvas").toDataURL();
      doc.addImage(logoDataUrl, "PNG", 20, 15, 70, 25);

      doc.setFont("times", "bold");
      doc.setFontSize(32);
      doc.text("CERTIFICATE OF COMPLETION", 148.5, 55, { align: "center" });

      doc.setFont("times", "italic");
      doc.setFontSize(14);
      doc.text("This is to certify that", 148.5, 70, { align: "center" });

      doc.setFont("times", "bold");
      doc.setFontSize(28);
      doc.text(name.toUpperCase(), 148.5, 90, { align: "center" });
      doc.line(90, 94, 208, 94);

      doc.setFont("times", "normal");
      doc.setFontSize(14);
      doc.text("has successfully completed the", 148.5, 109, { align: "center" });

      doc.setFont("times", "bold");
      doc.setFontSize(18);
      doc.text(program, 148.5, 122, { align: "center" });

      doc.setFont("times", "italic");
      doc.setFontSize(13);
      doc.text("with excellence in practical skills and demonstrated knowledge.", 148.5, 136, { align: "center" });

      doc.setFont("times", "italic");
      doc.setFontSize(13);
      doc.text("Certified by Nemo Cyber World", 148.5, 150, { align: "center" });

      doc.setFont("times", "bolditalic");
      doc.setFontSize(14);
      doc.text("Saide Hossain", 148.5, 164, { align: "center" });

      doc.setFont("times", "italic");
      doc.setFontSize(11);
      doc.text("Founder, Nemo Cyber World", 148.5, 172, { align: "center" });

      doc.setFont("times", "normal");
      doc.setFontSize(10);
      doc.text(`Date: ${new Date().toLocaleDateString()}`, 20, 190);
      doc.text(`Tracking ID: ${trackingId}`, 20, 198);

      doc.setFontSize(9);
      doc.text("Scan to verify", 275, 180, { align: "right" });
      doc.addImage(qrDataUrl, "PNG", 255, 183, 20, 20);

      return doc;
    }

    function previewCertificate() {
      const name = document.getElementById("name").value.trim();
      const link = document.getElementById("trackingLink").value.trim();
      const program = document.getElementById("program").value;
      const theme = document.getElementById("theme").value;
      const trackingId = "NCW-" + Math.random().toString(36).substring(2, 10).toUpperCase();
      if (!name || !link) return alert("Fill all fields");
      drawLogo();
      const doc = generatePDFBlob(theme, name, program, link, trackingId);
      const blob = doc.output("bloburl");
      document.getElementById("previewFrame").src = blob;
      document.getElementById("previewContainer").style.display = 'block';
    }

    function generateCertificate() {
      const name = document.getElementById("name").value.trim();
      const link = document.getElementById("trackingLink").value.trim();
      const program = document.getElementById("program").value;
      const theme = document.getElementById("theme").value;
      const trackingId = "NCW-" + Math.random().toString(36).substring(2, 10).toUpperCase();
      if (!name || !link) return alert("Fill all fields");
      drawLogo();
      const doc = generatePDFBlob(theme, name, program, link, trackingId);
      doc.save(`certificate-${name.replace(/\s+/g, "_")}.pdf`);
    }
  </script>
</body>
</html>
