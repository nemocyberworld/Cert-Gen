<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ðŸŽ“ Certificate Generator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
  <style>
    body {
      font-family: 'Georgia', serif;
      background: #f1f5f9;
      text-align: center;
      padding: 40px 20px;
    }

    h2 {
      font-size: 28px;
      color: #1e293b;
      margin-bottom: 20px;
    }

    input {
      padding: 10px 14px;
      margin: 8px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 6px;
      width: 320px;
    }

    button {
      padding: 10px 24px;
      font-size: 16px;
      background-color: #1e293b;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    button:hover {
      background-color: #334155;
    }
  </style>
</head>
<body>
  <h2>ðŸŽ“ Nemo Cyber World Certificate Generator</h2>

  <input id="name" placeholder="Recipient Full Name" /><br>
  <input id="trackingLink" placeholder="Verification Link (e.g. Google Drive URL)" /><br>
  <button onclick="generateCertificate()">Generate Certificate</button>

  <canvas id="qrCanvas" hidden></canvas>
  <canvas id="logoCanvas" width="400" height="80" hidden></canvas>

  <script>
    function drawLogo() {
      const canvas = document.getElementById('logoCanvas');
      const ctx = canvas.getContext('2d');

      // Clear canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw circle behind N
      const circleX = 30;
      const circleY = 40;
      const radius = 25;

      ctx.beginPath();
      ctx.arc(circleX, circleY, radius, 0, Math.PI * 2);
      ctx.fillStyle = '#0ea5e9'; // blue
      ctx.fill();

      // N in the circle
      ctx.font = 'bold 24px Segoe UI';
      ctx.fillStyle = '#ffffff';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('N', circleX, circleY);

      // Strong brand text: Nemo Cyber World
      ctx.font = 'bold 20px "Segoe UI", sans-serif';
      ctx.fillStyle = '#0f172a'; // darker slate for contrast
      ctx.textAlign = 'start';
      ctx.fillText('Nemo Cyber World', 70, 44); // slightly lifted to align visually
    }

    async function generateCertificate() {
      const name = document.getElementById("name").value.trim();
      const link = document.getElementById("trackingLink").value.trim();

      if (!name || !link) {
        alert("Please enter name and verification link.");
        return;
      }

      drawLogo();

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF({ orientation: "landscape", unit: "mm", format: "a4" });

      const trackingId = "NCW-" + Math.random().toString(36).substring(2, 10).toUpperCase();

      // Background lines
      doc.setDrawColor(235);
      for (let i = -200; i < 500; i += 10) {
        doc.line(i, 0, i + 200, 210);
      }

      // Border
      doc.setDrawColor(100);
      doc.setLineWidth(1.2);
      doc.rect(10, 10, 277, 190);

      // QR Code
      const qr = new QRious({
        element: document.getElementById("qrCanvas"),
        value: link,
        size: 100,
      });
      const qrDataUrl = qr.toDataURL();

      // Logo
      const logoCanvas = document.getElementById("logoCanvas");
      const logoDataUrl = logoCanvas.toDataURL();
      doc.addImage(logoDataUrl, "PNG", 20, 15, 70, 25);

      // Title
      doc.setFont("times", "bold");
      doc.setFontSize(32);
      doc.setTextColor(0, 0, 0);
      doc.text("CERTIFICATE OF COMPLETION", 148.5, 55, { align: "center" });

      // Subtitle
      doc.setFont("times", "italic");
      doc.setFontSize(14);
      doc.setTextColor(90, 90, 90);
      doc.text("This is to proudly certify that", 148.5, 70, { align: "center" });

      // Name
      doc.setFont("times", "bold");
      doc.setFontSize(28);
      doc.setTextColor(20, 20, 20);
      doc.text(name.toUpperCase(), 148.5, 90, { align: "center" });
      doc.line(90, 94, 208, 94);

      // Program
      doc.setFont("times", "normal");
      doc.setFontSize(14);
      doc.setTextColor(0, 0, 0);
      doc.text("has successfully completed the", 148.5, 109, { align: "center" });

      doc.setFont("times", "bold");
      doc.setFontSize(18);
      doc.setTextColor(30, 30, 30);
      doc.text("Full Stack Developer Program", 148.5, 122, { align: "center" });

      // Practical highlight
      doc.setFont("times", "italic");
      doc.setFontSize(13);
      doc.setTextColor(90, 90, 90);
      doc.text("with demonstrated skills in hands-on projects and real-world development.", 148.5, 136, { align: "center" });

      // Certified by
      doc.setFont("times", "italic");
      doc.setFontSize(13);
      doc.setTextColor(70, 70, 70);
      doc.text("Certified by Nemo Cyber World", 148.5, 150, { align: "center" });

      // Signature
      doc.setFont("times", "bolditalic");
      doc.setFontSize(14);
      doc.setTextColor(40, 40, 40);
      doc.text("Saide Hossain", 148.5, 164, { align: "center" });

      doc.setFont("times", "italic");
      doc.setFontSize(11);
      doc.setTextColor(100);
      doc.text("Founder, Nemo Cyber World", 148.5, 172, { align: "center" });

      // Footer
      doc.setFont("times", "normal");
      doc.setFontSize(10);
      doc.setTextColor(90);
      doc.text(`Date: ${new Date().toLocaleDateString()}`, 20, 190);
      doc.text(`Tracking ID: ${trackingId}`, 20, 198);

      // Aligned "Scan to verify" text with QR code right edge
      doc.setFontSize(9);
      doc.text("Scan to verify", 275, 180, { align: "right" });
      doc.addImage(qrDataUrl, "PNG", 255, 183, 20, 20);

      doc.save(`certificate-${name.replace(/\s+/g, "_")}.pdf`);
    }
  </script>
</body>
</html>
